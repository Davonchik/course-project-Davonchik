# Архитектура приложения Reading List Frontend

## Общая структура

```
┌─────────────────────────────────────────────────────────────┐
│                    React Application                        │
├─────────────────────────────────────────────────────────────┤
│  App.tsx (Router + AuthProvider)                           │
│  ├── /login → LoginForm                                     │
│  ├── /register → RegisterForm                               │
│  └── / → ProtectedRoute → Layout → EntriesList             │
└─────────────────────────────────────────────────────────────┘
```

## Компонентная архитектура

### Аутентификация
```
AuthContext
├── AuthProvider (глобальное состояние)
├── LoginForm (форма входа)
├── RegisterForm (форма регистрации)
└── ProtectedRoute (защищенные маршруты)
```

### Основное приложение
```
Layout
├── Header (навигация + пользователь)
└── Main Content
    └── EntriesList
        ├── EntryFilters (фильтрация)
        ├── EntryCard (карточка записи)
        ├── EntryModal (создание/редактирование)
        └── Pagination (пагинация)
```

## Поток данных

### Аутентификация
1. Пользователь вводит данные в LoginForm/RegisterForm
2. Форма отправляет запрос через AuthContext
3. AuthContext вызывает API клиент
4. Токены сохраняются в localStorage
5. Состояние пользователя обновляется в контексте

### Управление записями
1. EntriesList загружает данные через API клиент
2. Фильтры обновляют состояние и перезагружают данные
3. EntryCard отображает записи с кнопками действий
4. EntryModal обрабатывает создание/редактирование
5. Изменения сохраняются через API и обновляют список

## API интеграция

```
API Client (Axios)
├── Interceptors
│   ├── Request: добавляет Bearer token
│   └── Response: обрабатывает 401, обновляет токены
├── Auth endpoints
│   ├── POST /auth/register
│   ├── POST /auth/login
│   ├── POST /auth/refresh
│   └── GET /auth/me
└── Entries endpoints
    ├── GET /entries (с фильтрами и пагинацией)
    ├── POST /entries
    ├── GET /entries/{id}
    ├── PATCH /entries/{id}
    └── DELETE /entries/{id}
```

## Управление состоянием

### Глобальное состояние (AuthContext)
- `user`: информация о текущем пользователе
- `isAuthenticated`: статус аутентификации
- `isLoading`: состояние загрузки

### Локальное состояние компонентов
- `EntriesList`: список записей, фильтры, пагинация
- `EntryModal`: данные формы, состояние загрузки
- `EntryCard`: состояние удаления

## Безопасность

### Защита маршрутов
- `ProtectedRoute` проверяет аутентификацию
- Перенаправление на /login для неавторизованных
- Проверка ролей для админских функций

### Управление токенами
- Автоматическое обновление access token
- Обработка истечения refresh token
- Безопасное хранение в localStorage

## Стилизация

### CSS модули
- Каждый компонент имеет свой CSS файл
- Глобальные стили в App.css
- Адаптивный дизайн с медиа-запросами

### Дизайн-система
- Цветовая палитра: градиенты синий-фиолетовый
- Типографика: системные шрифты
- Компоненты: карточки, кнопки, формы
- Анимации: hover эффекты, переходы

## Производительность

### Оптимизации
- React.memo для предотвращения лишних рендеров
- useCallback для стабильных функций
- Lazy loading для больших компонентов (если нужно)

### Bundle размер
- Tree shaking неиспользуемого кода
- Минификация и сжатие
- Разделение кода на чанки

## Тестирование

### Структура тестов
```
src/
├── __tests__/
│   ├── components/
│   ├── contexts/
│   └── api/
└── setupTests.ts
```

### Покрытие
- Unit тесты для компонентов
- Integration тесты для API
- E2E тесты для пользовательских сценариев
